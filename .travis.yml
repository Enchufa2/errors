language: R
sudo: false
cache: packages
r:
  - oldrel
  - release
  - devel

git:
  submodules: false

warnings_are_errors: true

addons:
  apt:
    packages:
      - libudunits2-dev

r_github_packages:
  - r-lib/covr@v3.0.1
  - r-quantities/units
  - r-quantities/errors

before_script:
  - git clone https://github.com/r-quantities/quantities.git
  - cd quantities && R CMD build .
  - R CMD check --as-cran quantities_*.tar.gz
  - cd .. && rm -rf quantities

after_success:
  - Rscript -e 'covr::codecov()'
